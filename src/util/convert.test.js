import * as convert from './convert'

describe('to2BPP', () => {
  it('converts a tile to a 2BPP array pair', () => {
    const tile = [
      [0, 3, 3, 3, 3, 3, 0, 0],
      [2, 2, 0, 0, 0, 2, 2, 0],
      [1, 1, 0, 0, 0, 1, 1, 0],
      [2, 2, 2, 2, 2, 2, 2, 0],
      [3, 3, 0, 0, 0, 3, 3, 0],
      [2, 2, 0, 0, 0, 2, 2, 0],
      [1, 1, 0, 0, 0, 1, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 0],
    ]

    const expected = [
      [[0, 1, 1, 1, 1, 1, 0, 0], [0, 1, 1, 1, 1, 1, 0, 0]],
      [[0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 0, 0, 0, 1, 1, 0]],
      [[1, 1, 0, 0, 0, 1, 1, 0], [0, 0, 0, 0, 0, 0, 0, 0]],
      [[0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 1, 1, 1, 1, 1, 0]],
      [[1, 1, 0, 0, 0, 1, 1, 0], [1, 1, 0, 0, 0, 1, 1, 0]],
      [[0, 0, 0, 0, 0, 0, 0, 0], [1, 1, 0, 0, 0, 1, 1, 0]],
      [[1, 1, 0, 0, 0, 1, 1, 0], [0, 0, 0, 0, 0, 0, 0, 0]],
      [[0, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0]],
    ]

    const result = convert.to2BPP(tile)
    result.forEach((row, idx) => {
      expect(row).toEqual(expected[idx])
    })
  })
})
